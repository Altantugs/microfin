{% extends 'base.html.twig' %}

{% block title %}Тайлан{% endblock %}

{% block body %}
  <h1>Нийт тайлан</h1>

  {% for label, messages in app.flashes %}
    {% for m in messages %}
      <div style="padding:8px;margin:6px 0;border:1px solid #ddd">{{ m }}</div>
    {% endfor %}
  {% endfor %}

  <div style="display:flex;gap:24px;margin:16px 0;">
    <div><b>Орлого:</b> {{ income|number_format(2, '.', ',') }}</div>
    <div><b>Зарлага:</b> {{ expense|number_format(2, '.', ',') }}</div>
    <div><b>Үлдэгдэл:</b> {{ balance|number_format(2, '.', ',') }}</div>
  </div>

  <h3>Сүүлийн 10 гүйлгээ</h3>
  <table border="1" cellpadding="6" cellspacing="0">
    <thead>
    <tr>
      <th>Огноо</th>
      <th>Тайлбар</th>
      <th>Дүн</th>
      <th>Чиглэл</th>
      <th>Ангилал</th>
      <th>Валют</th>
    </tr>
    </thead>
    <tbody>
    {% for t in latest %}
      <tr>
        <td>{{ t.date ? t.date|date('Y-m-d') : '' }}</td>
        <td>{{ t.description }}</td>
        <td style="text-align:right">{{ t.amount|number_format(2, '.', ',') }}</td>
        <td>{{ t.isIncome ? 'Орлого' : 'Зарлага' }}</td>
        <td>{{ t.category ?: '-' }}</td>
        <td>{{ t.currency ?: 'MNT' }}</td>
      </tr>
    {% else %}
      <tr><td colspan="6">Мэдээлэл алга.</td></tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}
